<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Carousel Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="carousel.css" rel="stylesheet">
  </head>
<!-- NAVBAR
================================================== -->
  <body>
    
	<div class="col-md-offset-2 col-md-8">
		<form class="form-horizontal" method="post" action="http://localhost:3000/algo/insert" enctype="application/json">
			<fieldset>
				<legend> Général Information </legend>
				<div class="form-group">
					<label class="col-md-2 control-label">Type : </label>
					<div class="col-md-10">
						<select class="radio" name="type" >
							<option value="image" > Image </option>
							<option value="audio" checked> Audio </option>
							<option value="video"> Video </option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-md-2 control-label">Titre* : </label>
					<div class="col-md-10">
						<input type="text" class="form-control" name="title" placeholder="Title by wich to call the algo">
					</div>
				</div>
				<div class="form-group">
					<label for="" class="col-md-2 control-label">Description* : </label>
					<div class="col-md-10">
						<textarea type="textarea" class="form-control" name="gen_desc" placeholder="Describe your algorithm" rows="3" required> </textarea> 
					</div>
				</div>
				<div class="form-group">
					<label for="" class="col-md-2 control-label">Mots clés : </label>
					<div class="col-md-10">
						<div class="row">
							<div class="col-md-6">
								<input type="text" class="form-control" name="keywords" placeholder="images, fft, filtrage ...">
							</div>
							<div class="col-md-2">
								<button type="button"> + </button>
							</div>
						</div>
				<!--	
						<div class="row">
							<div class="col-md-6">
								<input type="text" class="form-control" id="keywords" name="keywords" placeholder="images, fft, filtrage ...">
							</div>
							<div class="col-md-2">
								<button type="button"> + </button>
						
								<button type="button"> - </button>
							</div>
						</div>
				-->	
					</div>
				</div>
				<div class="form-group">
					<label for="" class="col-md-2 control-label">Liens : </label>
					<div class="col-md-10">
						<div class="row">
							<div class="col-md-6">
								<input type="text" class="form-control" name="links" placeholder="images, fft, filtrage ...">
							</div>
							<div class="col-md-2">
								<button type="button"> + </button>
							</div>
						</div>
					</div>
				</div>
				<div class="form-group">
					<label for="" class="col-md-2 control-label">Facturation : </label>
					<div class="col-md-10">
						<input type="number" name="facturation" />
					</div>
				</div>
			</fieldset>
			<fieldset>
				<legend>Technical Information</legend>
				<div class="form-group">
					<label class="col-md-2 control-label">Container Adress* : </label>
					<div class="col-md-10">
						<input type="text" class="form-control" name="container_url" placeholder="http://ws37.tl.teralab-datascience.fr:8100">
					</div>
				</div>
				<fieldset>

					<legend>
						HTTP Methods (at least one required) : 
						GET <input type="checkbox" id="get_method_allowed" name="get_method_allowed"/>
						POST <input type="checkbox" id="post_method_allowed" name="post_method_allowed"/>
						PUT <input type="checkbox" id="put_method_allowed" name="put_method_allowed"/>
						DELETE <input type="checkbox" id="delete_method_allowed" name="delete_method_allowed"/>

					</legend>
					
					<div id="get_method"> 
						<!-- ================ GET METHOD =============-->
						<legend> GET Method</legend>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Inputs : </label>
							<div id="get_inputs" class="col-md-10"></div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Outputs : </label>
							<div id="get_outputs" class="col-md-10"></div>
						</div>
						<div class="form-group" >
							<label for="" class="col-md-2 control-label">Description* : </label>
							<div class="col-md-10">
								<textarea type="textarea" class="form-control" name="get_description" placeholder="Describe your algorithm" rows="3" required> </textarea> 
							</div>
						</div>						
					</div>

					
					
					<div id="post_method"> 
						<!-- ================ POST METHOD =============-->
						<legend> POST Method</legend>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Inputs : </label>
							<div id="post_inputs" class="col-md-10"></div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Outputs : </label>
							<div id="post_outputs" class="col-md-10"></div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Description* : </label>
							<div class="col-md-10">
								<textarea type="textarea" class="form-control" name="post_description" placeholder="Describe your algorithm" rows="3" required> </textarea> 
							</div>
						</div>						
					</div>




					<div id="put_method"> 
						<!-- ================ PUT METHOD =============-->
						<legend> PUT Method</legend>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Inputs : </label>
							<div id="put_inputs" class="col-md-10"></div>
								
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Outputs : </label>
							<div id="put_outputs" class="col-md-10"></div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Description* : </label>
							<div class="col-md-10">
								<textarea type="textarea" class="form-control" name="put_description" placeholder="Describe your algorithm" rows="3" required> </textarea> 
							</div>
						</div>						
					</div>




					<div id="delete_method"> 
						<!-- ================ DELETE METHOD =============-->
						<legend> DELETE Method</legend>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Inputs : </label>
							<div id="delete_inputs"></div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Outputs : </label>
							<div id="delete_outputs" class="col-md-10"></div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">Description* : </label>
							<div class="col-md-10">
								<textarea type="textarea" class="form-control" name="delete_description" placeholder="Describe your algorithm" rows="3" required> </textarea> 
							</div>
						</div>						
					</div>

				</fieldset>
			</fieldset>
				<input type="submit" value="go"/>
		</form>
	</div>
	
	
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
	<script>
		$(function(){
			
			class EvolVingList {
				constructor(id, addcode, deletecode, listSize) {
					this.id = id;
					this.deletecode = deletecode;
					this.container = $('#'+id); ///---cocol
					$(this.container).prepend('<div class="row"><div class="col-md-'+((listSize)?listSize:8)+'"> </div></div>');
					this.list = $(this.container).children().first().children().first();
					var mysInstance = this;
					this.addButton = $('<div class="col-md-2">'+addcode+'</div>').click(function () {
						mysInstance.addNew();
					});

					$(this.container).add(this.list);
					
					$(this.container).children().first().append(this.addButton);
					this.count = 0;
					this.matchList = [];
					this.killList = [];
				}
				
				changeRender(f) {
					this.render = f;
				}

				render() {
					return this.render();
				}
				
				addNew() {
					if(typeof this.render === 'undefined')
						return;
					
					var next = this.render(this.count)
					this.killList.push(this.render(this.count));
					this.list.append(this.render(this.count));
					this.count++;
				}
				saySomething() {alert('What\'s up '+this.id);}
				
			}
			var style = function(method, io) {
				var right_code;
				if(io == "in")
					right_code = '<div class="col-md-10">'+
								 '	<div class="row">'+
								 '		<div class="col-md-5">'+
								 '			<input type="text" class="form-control" name="'+method+'_'+io+'_name" placeholder="Input Name*">'+
								 '		</div>'+
								 '		<div class="col-md-3"> '+
								 '			<select name="'+method+'_'+io+'_type">'+
								 '				<option value=""> Type*  </option>'+
								 '				<option value="img" > Image  </option>'+
								 '				<option value="audio"> Audio  </option>'+
								 '				<option value="video"> Video  </option>'+
								 '				<option value="text"> text  </option>'+
								 '			</select>'+
								 '		</div>'+

	 							 '		<div class="col-md-3"> '+
	 							 '			<select name="'+method+'_'+io+'_importance">'+
								 '				<option value=""> Importance* </option>'+
								 '				<option value="optional"> Optionnel </option>'+
								 '				<option value="required"> Obligatoire </option>'+
								 '			</select>'+
								 '		</div>'+
								 
								 '	</div>'+
								 '</div>';
				else
					right_code = '<div class="row">'+
								'	<div class="col-md-6"> '+
								'		<input type="text" class="form-control" name="'+method+'_'+io+'_name" placeholder="Input Name*">'+
								'	</div>'+
								'	<div class="col-md-3"> '+
								'		<select name="'+method+'_'+io+'_type">'+
								'			<option value=""> Type*  </option>'+
								'			<option value="img"> Image  </option>'+
								'			<option value="audio"> Audio  </option>'+
								'			<option value="video"> Video  </option>'+
								'			<option value="text"> text  </option>'+
								'		</select>'+
								'	</div>'+
								'</div>';
				
				return function(ind){
					var myOjectCaller = this;
					var btn = $('<div class="col-md-2">' + myOjectCaller.deletecode +'</div>').click(function(){
						$(this).parent().remove();
					});
					var c = $(right_code).append(btn);
					
					return c;
				};
			};
			var addBtn = '<button type="button">+</button>', delBtn = '<button type="button">-</button>';
			
			var get_inputs = new EvolVingList('get_inputs', addBtn, delBtn);
			get_inputs.changeRender(style("get", "in"));
			
			var get_outputs = new EvolVingList('get_outputs', addBtn, delBtn);
			get_outputs.changeRender(style("get", "out"));
			
			var post_inputs = new EvolVingList('post_inputs', addBtn, delBtn);
			post_inputs.changeRender(style("post", "in"));
			
			var post_outputs = new EvolVingList('post_outputs', addBtn, delBtn);
			post_outputs.changeRender(style("post", "out"));
			
			var put_inputs = new EvolVingList('put_inputs', addBtn, delBtn);
			put_inputs.changeRender(style("put", "in"));
			
			var put_outputs = new EvolVingList('put_outputs', addBtn, delBtn);
			put_outputs.changeRender(style("put", "out"));
			
			var delete_inputs = new EvolVingList('delete_inputs', addBtn, delBtn);
			delete_inputs.changeRender(style("delete", "in"));
			
			var delete_outputs = new EvolVingList('delete_outputs', addBtn, delBtn);
			delete_outputs.changeRender(style("delete", "out"));
			
			$('#get_method_allowed').click(function(){
				if( $('#get_method_allowed').is(':checked') )
					$('#get_method').show();
				else
					$('#get_method').hide();					
			});
			$('#post_method_allowed').click(function(){
				if( $('#post_method_allowed').is(':checked') )
					$('#post_method').show();
				else
					$('#post_method').hide();					
			});
			$('#put_method_allowed').click(function(){
				if( $('#put_method_allowed').is(':checked') )
					$('#put_method').show();
				else
					$('#put_method').hide();					
			});
			$('#delete_method_allowed').click(function(){
				if( $('#delete_method_allowed').is(':checked') )
					$('#delete_method').show();
				else
					$('#delete_method').hide();					
			});
			
		});
	</script>
  </body>
</html>

